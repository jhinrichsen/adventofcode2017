= Advent of code, 2017
:doctype: book
:toc:

image:https://godoc.org/gitlab.com/jhinrichsen/adventofcode2017?status.svg["godoc", link="https://godoc.org/gitlab.com/jhinrichsen/adventofcode2017"]
image:https://goreportcard.com/badge/gitlab.com/jhinrichsen/adventofcode2017["Go report card", link="https://goreportcard.com/report/gitlab.com/jhinrichsen/adventofcode2017"]
image:https://gitlab.com/jhinrichsen/adventofcode2017/badges/main/pipeline.svg[link="https://gitlab.com/jhinrichsen/adventofcode2017/-/commits/master",title="pipeline status"]
image:https://gitlab.com/jhinrichsen/adventofcode2017/badges/main/coverage.svg[link="https://gitlab.com/jhinrichsen/adventofcode2017/-/commits/master",title="coverage report"]

== Day 3, part 2

https://oeis.org/A141481

[source,pari]
----
{
	m=5;
	h=2*m-1;
	A=matrix(h, h);
	print1(A[m, m]=1, ", ");
	T=[[1, 0], [1, -1], [0, -1], [ -1, -1], [ -1, 0], [ -1, 1], [0, 1], [1, 1]];

	for (n=1, (h-2)^2-1,
		g=sqrtint(n);
		r=(g+g%2)\2;
		q=4*r^2;
		d=n-q;
		if (n<=q-2*r,
			j=d+3*r;
			k=r, if(n<=q, j=r; k=-d-r, if(n<=q+2*r, j=r-d; k=-r, j=-r; k=d-3*r)));
		j=j+m;
		k=k+m;
		s=0;
		for (c=1, 8, v=[j, k];
			v+=T[c];
			s=s+A[v[1], v[2]]);

		A[j, k]=s;
		print1(s, ", "))
}
----

I know a thing or two about C but this is just too dense to translate to Go.
The PARI based implementation uses no blocks, but comma operators all over the place and for loops in the arguments of a for loop.
I'll take the easy route and use the [https://oeis.org/A141481/b141481.txt] result table.
